((THREE.CSS3DObject = function (e) {
  (THREE.Object3D.call(this),
    (this.element = e),
    (this.element.style.position = 'absolute'),
    this.addEventListener('removed', function () {
      null !== this.element.parentNode && this.element.parentNode.removeChild(this.element);
    }));
}),
  (THREE.CSS3DObject.prototype = Object.create(THREE.Object3D.prototype)),
  (THREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject),
  (THREE.CSS3DSprite = function (e) {
    THREE.CSS3DObject.call(this, e);
  }),
  (THREE.CSS3DSprite.prototype = Object.create(THREE.CSS3DObject.prototype)),
  (THREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite),
  (THREE.CSS3DRenderer = function () {
    function e(e) {
      return Math.abs(e) < 1e-10 ? 0 : e;
    }
    function t(t, r) {
      const n = t.elements,
        o =
          'matrix3d(' +
          e(n[0]) +
          ',' +
          e(n[1]) +
          ',' +
          e(n[2]) +
          ',' +
          e(n[3]) +
          ',' +
          e(-n[4]) +
          ',' +
          e(-n[5]) +
          ',' +
          e(-n[6]) +
          ',' +
          e(-n[7]) +
          ',' +
          e(n[8]) +
          ',' +
          e(n[9]) +
          ',' +
          e(n[10]) +
          ',' +
          e(n[11]) +
          ',' +
          e(n[12]) +
          ',' +
          e(n[13]) +
          ',' +
          e(n[14]) +
          ',' +
          e(n[15]) +
          ')';
      return p ? 'translate(-50%,-50%)translate(' + s + 'px,' + i + 'px)' + r + o : 'translate(-50%,-50%)' + o;
    }
    function r(e, n, o) {
      if (e instanceof THREE.CSS3DObject) {
        let s;
        e instanceof THREE.CSS3DSprite
          ? (a.copy(n.matrixWorldInverse),
            a.transpose(),
            a.copyPosition(e.matrixWorld),
            a.scale(e.scale),
            (a.elements[3] = 0),
            (a.elements[7] = 0),
            (a.elements[11] = 0),
            (a.elements[15] = 1),
            (s = t(a, o)))
          : (s = t(e.matrixWorld, o));
        const i = e.element,
          c = l.objects[e.id] && l.objects[e.id].style;
        ((void 0 !== c && c === s) ||
          ((i.style.WebkitTransform = s),
          (i.style.MozTransform = s),
          (i.style.transform = s),
          (l.objects[e.id] = { style: s }),
          p && (l.objects[e.id].distanceToCameraSquared = m(n, e))),
          i.parentNode !== d && d.appendChild(i));
      }
      for (let E = 0, S = e.children.length; E < S; E++) r(e.children[E], n, o);
    }
    console.log('THREE.CSS3DRenderer', THREE.REVISION);
    var n,
      o,
      s,
      i,
      a = new THREE.Matrix4(),
      l = { camera: { fov: 0, style: '' }, objects: {} },
      c = document.createElement('div');
    ((c.style.overflow = 'hidden'), (this.domElement = c));
    var d = document.createElement('div');
    ((d.style.WebkitTransformStyle = 'preserve-3d'),
      (d.style.MozTransformStyle = 'preserve-3d'),
      (d.style.transformStyle = 'preserve-3d'),
      c.appendChild(d));
    var p = /Trident/i.test(navigator.userAgent);
    ((this.setClearColor = function () {}),
      (this.getSize = function () {
        return { width: n, height: o };
      }),
      (this.setSize = function (e, t) {
        ((s = (n = e) / 2),
          (i = (o = t) / 2),
          (c.style.width = e + 'px'),
          (c.style.height = t + 'px'),
          (d.style.width = e + 'px'),
          (d.style.height = t + 'px'));
      }));
    var m = (function () {
      const e = new THREE.Vector3(),
        t = new THREE.Vector3();
      return function (r, n) {
        return (e.setFromMatrixPosition(r.matrixWorld), t.setFromMatrixPosition(n.matrixWorld), e.distanceToSquared(t));
      };
    })();
    this.render = function (t, n) {
      const o = n.projectionMatrix.elements[5] * i;
      (l.camera.fov !== o &&
        ((c.style.WebkitPerspective = o + 'px'),
        (c.style.MozPerspective = o + 'px'),
        (c.style.perspective = o + 'px'),
        (l.camera.fov = o)),
        t.updateMatrixWorld(),
        null === n.parent && n.updateMatrixWorld());
      const a =
          'translateZ(' +
          o +
          'px)' +
          (function (t) {
            const r = t.elements;
            return (
              'matrix3d(' +
              e(r[0]) +
              ',' +
              e(-r[1]) +
              ',' +
              e(r[2]) +
              ',' +
              e(r[3]) +
              ',' +
              e(r[4]) +
              ',' +
              e(-r[5]) +
              ',' +
              e(r[6]) +
              ',' +
              e(r[7]) +
              ',' +
              e(r[8]) +
              ',' +
              e(-r[9]) +
              ',' +
              e(r[10]) +
              ',' +
              e(r[11]) +
              ',' +
              e(r[12]) +
              ',' +
              e(-r[13]) +
              ',' +
              e(r[14]) +
              ',' +
              e(r[15]) +
              ')'
            );
          })(n.matrixWorldInverse),
        m = a + 'translate(' + s + 'px,' + i + 'px)';
      (l.camera.style === m ||
        p ||
        ((d.style.WebkitTransform = m), (d.style.MozTransform = m), (d.style.transform = m), (l.camera.style = m)),
        r(t, n, a),
        p &&
          (function (e) {
            const t = Object.keys(l.objects).sort(function (e, t) {
                return l.objects[e].distanceToCameraSquared - l.objects[t].distanceToCameraSquared;
              }),
              r = t.length;
            e.traverse(function (e) {
              const n = t.indexOf(e.id + '');
              -1 !== n && (e.element.style.zIndex = r - n);
            });
          })(t));
    };
  }));
