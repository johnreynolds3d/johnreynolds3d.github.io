!(function (e) {
  if ('object' == typeof exports && 'undefined' != typeof module) module.exports = e();
  else if ('function' == typeof define && define.amd) define([], e);
  else {
    ('undefined' != typeof window
      ? window
      : 'undefined' != typeof global
        ? global
        : 'undefined' != typeof self
          ? self
          : this
    ).RayInput = e();
  }
})(function () {
  return (function e(t, n, i) {
    function r(a, s) {
      if (!n[a]) {
        if (!t[a]) {
          const c = 'function' == typeof require && require;
          if (!s && c) return c(a, !0);
          if (o) return o(a, !0);
          const u = new Error("Cannot find module '" + a + "'");
          throw ((u.code = 'MODULE_NOT_FOUND'), u);
        }
        const l = (n[a] = { exports: {} });
        t[a][0].call(
          l.exports,
          function (e) {
            const n = t[a][1][e];
            return r(n || e);
          },
          l,
          l.exports,
          e,
          t,
          n,
          i
        );
      }
      return n[a].exports;
    }
    for (var o = 'function' == typeof require && require, a = 0; a < i.length; a++) r(i[a]);
    return r;
  })(
    {
      1: [
        function (e, t, n) {
          'use strict';
          function i(e, t, n) {
            ((this.fn = e), (this.context = t), (this.once = n || !1));
          }
          function r() {}
          const o = Object.prototype.hasOwnProperty,
            a = 'function' != typeof Object.create && '~';
          ((r.prototype._events = void 0),
            (r.prototype.eventNames = function () {
              let e,
                t = this._events,
                n = [];
              if (!t) return n;
              for (e in t) o.call(t, e) && n.push(a ? e.slice(1) : e);
              return Object.getOwnPropertySymbols ? n.concat(Object.getOwnPropertySymbols(t)) : n;
            }),
            (r.prototype.listeners = function (e, t) {
              const n = a ? a + e : e,
                i = this._events && this._events[n];
              if (t) return !!i;
              if (!i) return [];
              if (i.fn) return [i.fn];
              for (var r = 0, o = i.length, s = new Array(o); r < o; r++) s[r] = i[r].fn;
              return s;
            }),
            (r.prototype.emit = function (e, t, n, i, r, o) {
              const s = a ? a + e : e;
              if (!this._events || !this._events[s]) return !1;
              let c,
                u,
                l = this._events[s],
                h = arguments.length;
              if ('function' == typeof l.fn) {
                switch ((l.once && this.removeListener(e, l.fn, void 0, !0), h)) {
                  case 1:
                    return (l.fn.call(l.context), !0);
                  case 2:
                    return (l.fn.call(l.context, t), !0);
                  case 3:
                    return (l.fn.call(l.context, t, n), !0);
                  case 4:
                    return (l.fn.call(l.context, t, n, i), !0);
                  case 5:
                    return (l.fn.call(l.context, t, n, i, r), !0);
                  case 6:
                    return (l.fn.call(l.context, t, n, i, r, o), !0);
                }
                for (u = 1, c = new Array(h - 1); u < h; u++) c[u - 1] = arguments[u];
                l.fn.apply(l.context, c);
              } else {
                let d,
                  p = l.length;
                for (u = 0; u < p; u++)
                  switch ((l[u].once && this.removeListener(e, l[u].fn, void 0, !0), h)) {
                    case 1:
                      l[u].fn.call(l[u].context);
                      break;
                    case 2:
                      l[u].fn.call(l[u].context, t);
                      break;
                    case 3:
                      l[u].fn.call(l[u].context, t, n);
                      break;
                    default:
                      if (!c) for (d = 1, c = new Array(h - 1); d < h; d++) c[d - 1] = arguments[d];
                      l[u].fn.apply(l[u].context, c);
                  }
              }
              return !0;
            }),
            (r.prototype.on = function (e, t, n) {
              const r = new i(t, n || this),
                o = a ? a + e : e;
              return (
                this._events || (this._events = a ? {} : Object.create(null)),
                this._events[o]
                  ? this._events[o].fn
                    ? (this._events[o] = [this._events[o], r])
                    : this._events[o].push(r)
                  : (this._events[o] = r),
                this
              );
            }),
            (r.prototype.once = function (e, t, n) {
              const r = new i(t, n || this, !0),
                o = a ? a + e : e;
              return (
                this._events || (this._events = a ? {} : Object.create(null)),
                this._events[o]
                  ? this._events[o].fn
                    ? (this._events[o] = [this._events[o], r])
                    : this._events[o].push(r)
                  : (this._events[o] = r),
                this
              );
            }),
            (r.prototype.removeListener = function (e, t, n, i) {
              const r = a ? a + e : e;
              if (!this._events || !this._events[r]) return this;
              const o = this._events[r],
                s = [];
              if (t)
                if (o.fn) (o.fn !== t || (i && !o.once) || (n && o.context !== n)) && s.push(o);
                else
                  for (let c = 0, u = o.length; c < u; c++)
                    (o[c].fn !== t || (i && !o[c].once) || (n && o[c].context !== n)) && s.push(o[c]);
              return (s.length ? (this._events[r] = 1 === s.length ? s[0] : s) : delete this._events[r], this);
            }),
            (r.prototype.removeAllListeners = function (e) {
              return this._events
                ? (e ? delete this._events[a ? a + e : e] : (this._events = a ? {} : Object.create(null)), this)
                : this;
            }),
            (r.prototype.off = r.prototype.removeListener),
            (r.prototype.addListener = r.prototype.on),
            (r.prototype.setMaxListeners = function () {
              return this;
            }),
            (r.prefixed = a),
            void 0 !== t && (t.exports = r));
        },
        {},
      ],
      2: [
        function (e, t, n) {
          'use strict';
          Object.defineProperty(n, '__esModule', { value: !0 });
          const i = (function () {
              function e(e, t) {
                for (let n = 0; n < t.length; n++) {
                  const i = t[n];
                  ((i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    'value' in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i));
                }
              }
              return function (t, n, i) {
                return (n && e(t.prototype, n), i && e(t, i), t);
              };
            })(),
            r = new THREE.Vector3(0.155, -0.465, -0.15),
            o = new THREE.Vector3(0, 0, -0.25),
            a = new THREE.Vector3(0, 0, 0.05),
            s = new THREE.Vector3(-0.08, 0.14, 0.08),
            c = (function () {
              function e() {
                (!(function (e, t) {
                  if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                })(this, e),
                  (this.isLeftHanded = !1),
                  (this.controllerQ = new THREE.Quaternion()),
                  (this.lastControllerQ = new THREE.Quaternion()),
                  (this.headQ = new THREE.Quaternion()),
                  (this.headPos = new THREE.Vector3()),
                  (this.elbowPos = new THREE.Vector3()),
                  (this.wristPos = new THREE.Vector3()),
                  (this.time = null),
                  (this.lastTime = null),
                  (this.rootQ = new THREE.Quaternion()),
                  (this.pose = { orientation: new THREE.Quaternion(), position: new THREE.Vector3() }));
              }
              return (
                i(e, [
                  {
                    key: 'setControllerOrientation',
                    value: function (e) {
                      (this.lastControllerQ.copy(this.controllerQ), this.controllerQ.copy(e));
                    },
                  },
                  {
                    key: 'setHeadOrientation',
                    value: function (e) {
                      this.headQ.copy(e);
                    },
                  },
                  {
                    key: 'setHeadPosition',
                    value: function (e) {
                      this.headPos.copy(e);
                    },
                  },
                  {
                    key: 'setLeftHanded',
                    value: function (e) {
                      this.isLeftHanded = e;
                    },
                  },
                  {
                    key: 'update',
                    value: function () {
                      this.time = performance.now();
                      const e = this.getHeadYawOrientation_(),
                        t = (this.time - this.lastTime) / 1e3,
                        n = this.quatAngle_(this.lastControllerQ, this.controllerQ);
                      n / t > 0.61 ? this.rootQ.slerp(e, n / 10) : this.rootQ.copy(e);
                      const i = new THREE.Euler().setFromQuaternion(this.controllerQ, 'YXZ'),
                        c = THREE.Math.radToDeg(i.x),
                        u = this.clamp_((c - 11) / 39, 0, 1),
                        l = this.rootQ.clone().inverse();
                      l.multiply(this.controllerQ);
                      const h = this.elbowPos;
                      h.copy(this.headPos).add(r);
                      const d = new THREE.Vector3().copy(s);
                      (d.multiplyScalar(u), h.add(d));
                      const p = this.quatAngle_(l, new THREE.Quaternion()),
                        f = THREE.Math.radToDeg(p),
                        y = (1 - Math.pow(f / 180, 4)) * (0.4 + 0.6 * u * 0.4),
                        v = new THREE.Quaternion().slerp(l, y),
                        m = v.inverse(),
                        w = l.clone().multiply(m),
                        g = this.wristPos;
                      (g.copy(a), g.applyQuaternion(v), g.add(o), g.applyQuaternion(w), g.add(this.elbowPos));
                      const E = new THREE.Vector3().copy(s);
                      E.multiplyScalar(u);
                      const b = new THREE.Vector3().copy(this.wristPos);
                      (b.add(E), b.applyQuaternion(this.rootQ));
                      const _ = new THREE.Quaternion().copy(this.controllerQ);
                      (this.pose.orientation.copy(_), this.pose.position.copy(b), (this.lastTime = this.time));
                    },
                  },
                  {
                    key: 'getPose',
                    value: function () {
                      return this.pose;
                    },
                  },
                  {
                    key: 'getForearmLength',
                    value: function () {
                      return o.length();
                    },
                  },
                  {
                    key: 'getElbowPosition',
                    value: function () {
                      return this.elbowPos.clone().applyQuaternion(this.rootQ);
                    },
                  },
                  {
                    key: 'getWristPosition',
                    value: function () {
                      return this.wristPos.clone().applyQuaternion(this.rootQ);
                    },
                  },
                  {
                    key: 'getHeadYawOrientation_',
                    value: function () {
                      const e = new THREE.Euler().setFromQuaternion(this.headQ, 'YXZ');
                      ((e.x = 0), (e.z = 0));
                      return new THREE.Quaternion().setFromEuler(e);
                    },
                  },
                  {
                    key: 'clamp_',
                    value: function (e, t, n) {
                      return Math.min(Math.max(e, t), n);
                    },
                  },
                  {
                    key: 'quatAngle_',
                    value: function (e, t) {
                      const n = new THREE.Vector3(0, 0, -1),
                        i = new THREE.Vector3(0, 0, -1);
                      return (n.applyQuaternion(e), i.applyQuaternion(t), n.angleTo(i));
                    },
                  },
                ]),
                e
              );
            })();
          n.default = c;
        },
        {},
      ],
      3: [
        function (e, t, n) {
          'use strict';
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          Object.defineProperty(n, '__esModule', { value: !0 });
          const r = (function () {
              function e(e, t) {
                for (let n = 0; n < t.length; n++) {
                  const i = t[n];
                  ((i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    'value' in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i));
                }
              }
              return function (t, n, i) {
                return (n && e(t.prototype, n), i && e(t, i), t);
              };
            })(),
            o = i(e('eventemitter3')),
            a = i(e('./ray-interaction-modes')),
            s = e('./util'),
            c = (function (e) {
              function t(e) {
                !(function (e, t) {
                  if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                })(this, t);
                const n = (function (e, t) {
                    if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || ('object' != typeof t && 'function' != typeof t) ? e : t;
                  })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                  i = e || window;
                return (
                  i.addEventListener('mousedown', n.onMouseDown_.bind(n)),
                  i.addEventListener('mousemove', n.onMouseMove_.bind(n)),
                  i.addEventListener('mouseup', n.onMouseUp_.bind(n)),
                  i.addEventListener('touchstart', n.onTouchStart_.bind(n)),
                  i.addEventListener('touchmove', n.onTouchMove_.bind(n)),
                  i.addEventListener('touchend', n.onTouchEnd_.bind(n)),
                  (n.pointer = new THREE.Vector2()),
                  (n.lastPointer = new THREE.Vector2()),
                  (n.pointerNdc = new THREE.Vector2()),
                  (n.dragDistance = 0),
                  (n.isDragging = !1),
                  (n.isTouchActive = !1),
                  (n.isSyntheticMouseEvent = !1),
                  (n.gamepad = null),
                  navigator.getVRDisplays
                    ? navigator.getVRDisplays().then(function (e) {
                        n.vrDisplay = e[0];
                      })
                    : console.warn('WebVR API not available! Consider using the webvr-polyfill.'),
                  n
                );
              }
              return (
                (function (e, t) {
                  if ('function' != typeof t && null !== t)
                    throw new TypeError('Super expression must either be null or a function, not ' + typeof t);
                  ((e.prototype = Object.create(t && t.prototype, {
                    constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 },
                  })),
                    t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : (e.__proto__ = t)));
                })(t, o.default),
                r(t, [
                  {
                    key: 'getInteractionMode',
                    value: function () {
                      const e = this.getVRGamepad_();
                      if (!e)
                        return (0, s.isMobile)()
                          ? this.vrDisplay && this.vrDisplay.isPresenting
                            ? a.default.VR_0DOF
                            : a.default.TOUCH
                          : a.default.MOUSE;
                      const t = e.pose;
                      return t
                        ? t.hasPosition
                          ? a.default.VR_6DOF
                          : t.hasOrientation
                            ? a.default.VR_3DOF
                            : a.default.TOUCH
                        : a.default.VR_0DOF;
                    },
                  },
                  {
                    key: 'getGamepadPose',
                    value: function () {
                      return this.getVRGamepad_().pose || {};
                    },
                  },
                  {
                    key: 'getIsTouchActive',
                    value: function () {
                      return this.isTouchActive;
                    },
                  },
                  {
                    key: 'isCardboardCompatClick',
                    value: function (e) {
                      const t = this.getInteractionMode();
                      return (t == a.default.VR_0DOF || t == a.default.VR_3DOF) && 0 == e.screenX && 0 == e.screenY;
                    },
                  },
                  {
                    key: 'setSize',
                    value: function (e) {
                      this.size = e;
                    },
                  },
                  {
                    key: 'update',
                    value: function () {
                      const e = this.getInteractionMode();
                      if (e == a.default.VR_0DOF || e == a.default.VR_3DOF || e == a.default.VR_6DOF) {
                        const t = this.getGamepadButtonPressed_();
                        (t && !this.wasGamepadPressed && this.emit('raydown'),
                          !t && this.wasGamepadPressed && this.emit('rayup'),
                          (this.wasGamepadPressed = t));
                      }
                    },
                  },
                  {
                    key: 'getGamepadButtonPressed_',
                    value: function () {
                      const e = this.getVRGamepad_();
                      if (!e) return !1;
                      for (let t = 0; t < e.buttons.length; ++t) if (e.buttons[t].pressed) return !0;
                      return !1;
                    },
                  },
                  {
                    key: 'onMouseDown_',
                    value: function (e) {
                      this.isSyntheticMouseEvent ||
                        this.isCardboardCompatClick(e) ||
                        (this.startDragging_(e), this.emit('raydown'));
                    },
                  },
                  {
                    key: 'onMouseMove_',
                    value: function (e) {
                      this.isSyntheticMouseEvent ||
                        (this.updatePointer_(e), this.updateDragDistance_(), this.emit('pointermove', this.pointerNdc));
                    },
                  },
                  {
                    key: 'onMouseUp_',
                    value: function (e) {
                      const t = this.isSyntheticMouseEvent;
                      ((this.isSyntheticMouseEvent = !1), t || this.isCardboardCompatClick(e) || this.endDragging_());
                    },
                  },
                  {
                    key: 'onTouchStart_',
                    value: function (e) {
                      this.isTouchActive = !0;
                      const t = e.touches[0];
                      (this.startDragging_(t),
                        this.updateTouchPointer_(e),
                        this.emit('pointermove', this.pointerNdc),
                        this.emit('raydown'));
                    },
                  },
                  {
                    key: 'onTouchMove_',
                    value: function (e) {
                      (this.updateTouchPointer_(e), this.updateDragDistance_());
                    },
                  },
                  {
                    key: 'onTouchEnd_',
                    value: function (e) {
                      (this.endDragging_(), (this.isSyntheticMouseEvent = !0), (this.isTouchActive = !1));
                    },
                  },
                  {
                    key: 'updateTouchPointer_',
                    value: function (e) {
                      if (0 !== e.touches.length) {
                        const t = e.touches[0];
                        this.updatePointer_(t);
                      } else console.warn('Received touch event with no touches.');
                    },
                  },
                  {
                    key: 'updatePointer_',
                    value: function (e) {
                      (this.pointer.set(e.clientX, e.clientY),
                        (this.pointerNdc.x = (e.clientX / this.size.width) * 2 - 1),
                        (this.pointerNdc.y = (-e.clientY / this.size.height) * 2 + 1));
                    },
                  },
                  {
                    key: 'updateDragDistance_',
                    value: function () {
                      if (this.isDragging) {
                        const e = this.lastPointer.sub(this.pointer).length();
                        ((this.dragDistance += e),
                          this.lastPointer.copy(this.pointer),
                          this.dragDistance > 10 && (this.emit('raycancel'), (this.isDragging = !1)));
                      }
                    },
                  },
                  {
                    key: 'startDragging_',
                    value: function (e) {
                      ((this.isDragging = !0), this.lastPointer.set(e.clientX, e.clientY));
                    },
                  },
                  {
                    key: 'endDragging_',
                    value: function () {
                      (this.dragDistance < 10 && this.emit('rayup'), (this.dragDistance = 0), (this.isDragging = !1));
                    },
                  },
                  {
                    key: 'getVRGamepad_',
                    value: function () {
                      if (!navigator.getGamepads) return null;
                      for (let e = navigator.getGamepads(), t = 0; t < e.length; ++t) {
                        const n = e[t];
                        if (n && (n.pose || n.displayId)) return n;
                      }
                      return null;
                    },
                  },
                ]),
                t
              );
            })();
          n.default = c;
        },
        { './ray-interaction-modes': 5, './util': 7, eventemitter3: 1 },
      ],
      4: [
        function (e, t, n) {
          'use strict';
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          Object.defineProperty(n, '__esModule', { value: !0 });
          const r = (function () {
              function e(e, t) {
                for (let n = 0; n < t.length; n++) {
                  const i = t[n];
                  ((i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    'value' in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i));
                }
              }
              return function (t, n, i) {
                return (n && e(t.prototype, n), i && e(t, i), t);
              };
            })(),
            o = i(e('./orientation-arm-model')),
            a = i(e('eventemitter3')),
            s = i(e('./ray-renderer')),
            c = i(e('./ray-controller')),
            u = i(e('./ray-interaction-modes')),
            l = (function (e) {
              function t(e, n) {
                !(function (e, t) {
                  if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                })(this, t);
                const i = (function (e, t) {
                  if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                  return !t || ('object' != typeof t && 'function' != typeof t) ? e : t;
                })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return (
                  (i.camera = e),
                  (i.renderer = new s.default(e)),
                  (i.controller = new c.default(n)),
                  (i.armModel = new o.default()),
                  i.controller.on('raydown', i.onRayDown_.bind(i)),
                  i.controller.on('rayup', i.onRayUp_.bind(i)),
                  i.controller.on('raycancel', i.onRayCancel_.bind(i)),
                  i.controller.on('pointermove', i.onPointerMove_.bind(i)),
                  i.renderer.on('rayover', function (e) {
                    i.emit('rayover', e);
                  }),
                  i.renderer.on('rayout', function (e) {
                    i.emit('rayout', e);
                  }),
                  (i.pointerNdc = new THREE.Vector2(1, 1)),
                  (i.handlers = {}),
                  i
                );
              }
              return (
                (function (e, t) {
                  if ('function' != typeof t && null !== t)
                    throw new TypeError('Super expression must either be null or a function, not ' + typeof t);
                  ((e.prototype = Object.create(t && t.prototype, {
                    constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 },
                  })),
                    t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : (e.__proto__ = t)));
                })(t, a.default),
                r(t, [
                  {
                    key: 'add',
                    value: function (e, t) {
                      (this.renderer.add(e, t), (this.handlers[e.id] = t));
                    },
                  },
                  {
                    key: 'remove',
                    value: function (e) {
                      (this.renderer.remove(e), delete this.handlers[e.id]);
                    },
                  },
                  {
                    key: 'update',
                    value: function () {
                      new THREE.Vector3(0, 0, -1).applyQuaternion(this.camera.quaternion);
                      switch (this.controller.getInteractionMode()) {
                        case u.default.MOUSE:
                          (this.renderer.setPointer(this.pointerNdc),
                            this.renderer.setRayVisibility(!1),
                            this.renderer.setReticleVisibility(!1),
                            this.renderer.setActive(!0));
                          break;
                        case u.default.TOUCH:
                          (this.renderer.setPointer(this.pointerNdc),
                            this.renderer.setRayVisibility(!1),
                            this.renderer.setReticleVisibility(!1),
                            this.renderer.setActive(this.controller.getIsTouchActive()));
                          break;
                        case u.default.VR_0DOF:
                          (this.renderer.setPosition(this.camera.position),
                            this.renderer.setOrientation(this.camera.quaternion),
                            this.renderer.setRayVisibility(!1),
                            this.renderer.setReticleVisibility(!0),
                            this.renderer.setActive(!0));
                          break;
                        case u.default.VR_3DOF:
                          var e = this.controller.getGamepadPose(),
                            t = new THREE.Quaternion().fromArray(e.orientation);
                          (this.armModel.setHeadOrientation(this.camera.quaternion),
                            this.armModel.setHeadPosition(this.camera.position),
                            this.armModel.setControllerOrientation(t),
                            this.armModel.update());
                          var n = this.armModel.getPose();
                          (this.renderer.setPosition(n.position),
                            this.renderer.setOrientation(n.orientation),
                            this.renderer.setRayVisibility(!0),
                            this.renderer.setReticleVisibility(!0),
                            this.renderer.setActive(!0));
                          break;
                        case u.default.VR_6DOF:
                          if (!(e = this.controller.getGamepadPose()).orientation || !e.position) {
                            console.warn("Invalid gamepad pose. Can't update ray.");
                            break;
                          }
                          var i = new THREE.Quaternion().fromArray(e.orientation),
                            r = new THREE.Vector3().fromArray(e.position);
                          (this.renderer.setOrientation(i),
                            this.renderer.setPosition(r),
                            this.renderer.setRayVisibility(!0),
                            this.renderer.setReticleVisibility(!0),
                            this.renderer.setActive(!0));
                          break;
                        default:
                          console.error('Unknown interaction mode.');
                      }
                      (this.renderer.update(), this.controller.update());
                    },
                  },
                  {
                    key: 'setSize',
                    value: function (e) {
                      this.controller.setSize(e);
                    },
                  },
                  {
                    key: 'getMesh',
                    value: function () {
                      return this.renderer.getReticleRayMesh();
                    },
                  },
                  {
                    key: 'getOrigin',
                    value: function () {
                      return this.renderer.getOrigin();
                    },
                  },
                  {
                    key: 'getDirection',
                    value: function () {
                      return this.renderer.getDirection();
                    },
                  },
                  {
                    key: 'getRightDirection',
                    value: function () {
                      const e = new THREE.Vector3(0, 0, -1);
                      return (
                        e.applyQuaternion(this.camera.quaternion),
                        new THREE.Vector3().crossVectors(e, this.camera.up)
                      );
                    },
                  },
                  {
                    key: 'onRayDown_',
                    value: function (e) {
                      this.renderer.update();
                      const t = this.renderer.getSelectedMesh();
                      (this.emit('raydown', t), this.renderer.setActive(!0));
                    },
                  },
                  {
                    key: 'onRayUp_',
                    value: function (e) {
                      const t = this.renderer.getSelectedMesh();
                      (this.emit('rayup', t), this.renderer.setActive(!1));
                    },
                  },
                  {
                    key: 'onRayCancel_',
                    value: function (e) {
                      const t = this.renderer.getSelectedMesh();
                      this.emit('raycancel', t);
                    },
                  },
                  {
                    key: 'onPointerMove_',
                    value: function (e) {
                      this.pointerNdc.copy(e);
                    },
                  },
                ]),
                t
              );
            })();
          n.default = l;
        },
        {
          './orientation-arm-model': 2,
          './ray-controller': 3,
          './ray-interaction-modes': 5,
          './ray-renderer': 6,
          eventemitter3: 1,
        },
      ],
      5: [
        function (e, t, n) {
          'use strict';
          Object.defineProperty(n, '__esModule', { value: !0 });
          n.default = { MOUSE: 1, TOUCH: 2, VR_0DOF: 3, VR_3DOF: 4, VR_6DOF: 5 };
        },
        {},
      ],
      6: [
        function (e, t, n) {
          'use strict';
          Object.defineProperty(n, '__esModule', { value: !0 });
          const i = (function () {
              function e(e, t) {
                for (let n = 0; n < t.length; n++) {
                  const i = t[n];
                  ((i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    'value' in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i));
                }
              }
              return function (t, n, i) {
                return (n && e(t.prototype, n), i && e(t, i), t);
              };
            })(),
            r = e('./util'),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(e('eventemitter3')),
            a = 3,
            s = (0, r.base64)(
              'image/png',
              'iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABdklEQVR4nO3WwXHEQAwDQcin/FOWw+BjuiPYB2q4G2nP933P9SO4824zgDADiDOAuHfb3/UjuKMAcQYQZwBx/gBxChCnAHEKEKcAcQoQpwBxChCnAHEGEGcAcf4AcQoQZwBxBhBnAHEGEGcAcQYQZwBxBhBnAHEGEGcAcQYQZwBxBhBnAHHvtt/1I7ijAHEGEGcAcf4AcQoQZwBxTkCcAsQZQJwTEKcAcQoQpwBxBhDnBMQpQJwCxClAnALEKUCcAsQpQJwCxClAnALEKUCcAsQpQJwBxDkBcQoQpwBxChCnAHEKEKcAcQoQpwBxChCnAHEKEGcAcU5AnALEKUCcAsQZQJwTEKcAcQYQ5wTEKUCcAcQZQJw/QJwCxBlAnAHEGUCcAcQZQJwBxBlAnAHEGUCcAcQZQJwBxBlAnAHEGUDcu+25fgR3FCDOAOIMIM4fIE4B4hQgTgHiFCBOAeIUIE4B4hQgzgDiDCDOHyBOAeIMIM4A4v4B/5IF9eD6QxgAAAAASUVORK5CYII='
            ),
            c = (function (e) {
              function t(e, n) {
                !(function (e, t) {
                  if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
                })(this, t);
                const i = (function (e, t) {
                  if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                  return !t || ('object' != typeof t && 'function' != typeof t) ? e : t;
                })(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                i.camera = e;
                return (
                  (i.meshes = {}),
                  (i.selected = {}),
                  (i.raycaster = new THREE.Raycaster()),
                  (i.position = new THREE.Vector3()),
                  (i.orientation = new THREE.Quaternion()),
                  (i.root = new THREE.Object3D()),
                  (i.reticle = i.createReticle_()),
                  i.root.add(i.reticle),
                  (i.ray = i.createRay_()),
                  i.root.add(i.ray),
                  (i.reticleDistance = a),
                  i
                );
              }
              return (
                (function (e, t) {
                  if ('function' != typeof t && null !== t)
                    throw new TypeError('Super expression must either be null or a function, not ' + typeof t);
                  ((e.prototype = Object.create(t && t.prototype, {
                    constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 },
                  })),
                    t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : (e.__proto__ = t)));
                })(t, o.default),
                i(t, [
                  {
                    key: 'add',
                    value: function (e) {
                      this.meshes[e.id] = e;
                    },
                  },
                  {
                    key: 'remove',
                    value: function (e) {
                      const t = e.id;
                      (this.meshes[t] && delete this.meshes[t], this.selected[t] && delete this.selected[e.id]);
                    },
                  },
                  {
                    key: 'update',
                    value: function () {
                      for (const e in this.meshes) {
                        const t = this.meshes[e],
                          n = this.raycaster.intersectObject(t, !0);
                        n.length > 1 && console.warn('Unexpected: multiple meshes intersected.');
                        const i = n.length > 0,
                          r = this.selected[e];
                        (i && !r && ((this.selected[e] = !0), this.isActive && this.emit('rayover', t)),
                          !i &&
                            r &&
                            (delete this.selected[e], this.moveReticle_(null), this.isActive && this.emit('rayout', t)),
                          i && this.moveReticle_(n));
                      }
                    },
                  },
                  {
                    key: 'setPosition',
                    value: function (e) {
                      (this.position.copy(e), this.raycaster.ray.origin.copy(e), this.updateRaycaster_());
                    },
                  },
                  {
                    key: 'getOrigin',
                    value: function () {
                      return this.raycaster.ray.origin;
                    },
                  },
                  {
                    key: 'setOrientation',
                    value: function (e) {
                      this.orientation.copy(e);
                      const t = new THREE.Vector3(0, 0, -1).applyQuaternion(e);
                      (this.raycaster.ray.direction.copy(t), this.updateRaycaster_());
                    },
                  },
                  {
                    key: 'getDirection',
                    value: function () {
                      return this.raycaster.ray.direction;
                    },
                  },
                  {
                    key: 'setPointer',
                    value: function (e) {
                      (this.raycaster.setFromCamera(e, this.camera), this.updateRaycaster_());
                    },
                  },
                  {
                    key: 'getReticleRayMesh',
                    value: function () {
                      return this.root;
                    },
                  },
                  {
                    key: 'getSelectedMesh',
                    value: function () {
                      let e = 0,
                        t = null;
                      for (const n in this.selected) ((e += 1), (t = this.meshes[n]));
                      return (e > 1 && console.warn('More than one mesh selected.'), t);
                    },
                  },
                  {
                    key: 'setReticleVisibility',
                    value: function (e) {
                      this.reticle.visible = e;
                    },
                  },
                  {
                    key: 'setRayVisibility',
                    value: function (e) {
                      this.ray.visible = e;
                    },
                  },
                  {
                    key: 'setActive',
                    value: function (e) {
                      if (this.isActive != e && ((this.isActive = e), !e)) {
                        this.moveReticle_(null);
                        for (const t in this.selected) {
                          const n = this.meshes[t];
                          (delete this.selected[t], this.emit('rayout', n));
                        }
                      }
                    },
                  },
                  {
                    key: 'updateRaycaster_',
                    value: function () {
                      const e = this.raycaster.ray,
                        t = this.reticle.position;
                      (t.copy(e.direction), t.multiplyScalar(this.reticleDistance), t.add(e.origin));
                      const n = new THREE.Vector3().copy(e.direction);
                      (n.multiplyScalar(this.reticleDistance), (this.ray.scale.y = n.length()));
                      const i = new THREE.ArrowHelper(e.direction, e.origin);
                      (this.ray.rotation.copy(i.rotation),
                        this.ray.position.addVectors(e.origin, n.multiplyScalar(0.5)));
                    },
                  },
                  {
                    key: 'createReticle_',
                    value: function () {
                      const e = new THREE.SphereGeometry(0.02, 32, 32),
                        t = new THREE.MeshBasicMaterial({ color: 16777215, transparent: !0, opacity: 0.9 }),
                        n = new THREE.Mesh(e, t),
                        i = new THREE.SphereGeometry(0.04, 32, 32),
                        r = new THREE.MeshBasicMaterial({ color: 3355443, transparent: !0, opacity: 0.3 }),
                        o = new THREE.Mesh(i, r),
                        a = new THREE.Group();
                      return (a.add(n), a.add(o), a);
                    },
                  },
                  {
                    key: 'moveReticle_',
                    value: function (e) {
                      let t = a;
                      if (e) {
                        t = e[0].distance;
                      }
                      ((this.reticleDistance = t), this.updateRaycaster_());
                    },
                  },
                  {
                    key: 'createRay_',
                    value: function () {
                      const e = new THREE.CylinderGeometry(0.02, 0.02, 1, 32),
                        t = new THREE.MeshBasicMaterial({
                          map: THREE.ImageUtils.loadTexture(s),
                          transparent: !0,
                          opacity: 0.3,
                        });
                      return new THREE.Mesh(e, t);
                    },
                  },
                ]),
                t
              );
            })();
          n.default = c;
        },
        { './util': 7, eventemitter3: 1 },
      ],
      7: [
        function (e, t, n) {
          'use strict';
          (Object.defineProperty(n, '__esModule', { value: !0 }),
            (n.isMobile = function () {
              let e = !1;
              return (
                (function (t) {
                  (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(
                    t
                  ) ||
                    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
                      t.substr(0, 4)
                    )) &&
                    (e = !0);
                })(navigator.userAgent || navigator.vendor || window.opera),
                e
              );
            }),
            (n.base64 = function (e, t) {
              return 'data:' + e + ';base64,' + t;
            }));
        },
        {},
      ],
    },
    {},
    [4]
  )(4);
});
